<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å Modern Style</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <!-- Phosphor Icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <style>
    body {
      font-family: 'Prompt', sans-serif;
      background-color: #f8fafc; /* Slate 50 */
    }
    
    /* Smooth Scroll */
    html {
      scroll-behavior: smooth;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
  </style>
 </head>
 <body class="h-full text-slate-800">
  <div id="app" class="min-h-full"></div>

  <script>
    // --- Data & State ---
    let currentUser = null;
    let currentView = 'home';
    let selectedProperty = null;
    let activeFilter = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
    
    // Sample properties data (Original Data)
    const sampleProperties = [
      {
        id: '1',
        name: '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏´‡∏£‡∏π ‡∏ß‡∏¥‡∏ß‡∏ó‡∏∞‡πÄ‡∏•',
        type: '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
        description: '‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏∏‡∏î‡πÇ‡∏£‡πÅ‡∏°‡∏ô‡∏ï‡∏¥‡∏Å‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ï‡∏¥‡∏î‡∏ó‡∏∞‡πÄ‡∏• ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÇ‡∏°‡πÄ‡∏î‡∏¥‡∏£‡πå‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏á‡∏ä‡∏°‡∏ß‡∏¥‡∏ß‡∏û‡∏≤‡πÇ‡∏ô‡∏£‡∏≤‡∏°‡∏≤',
        price: 3500,
        location: '‡∏û‡∏±‡∏ó‡∏¢‡∏≤, ‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ',
        bedrooms: 2,
        bathrooms: 2,
        image: 'üåä',
        color: 'bg-blue-100 text-blue-500',
        amenities: ['Wi-Fi ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á', '‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ Infinity', '‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß', '‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£'],
        rating: 4.8,
        reviews: 124,
        ownerId: 'owner1'
      },
      {
        id: '2',
        name: '‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÇ‡∏°‡πÄ‡∏î‡∏¥‡∏£‡πå‡∏ô',
        type: '‡∏ö‡πâ‡∏≤‡∏ô',
        description: '‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏ï‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏® 3 ‡∏ä‡∏±‡πâ‡∏ô ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏á‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà',
        price: 8000,
        location: '‡∏´‡∏≤‡∏á‡∏î‡∏á, ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà',
        bedrooms: 4,
        bathrooms: 3,
        image: 'üè°',
        color: 'bg-emerald-100 text-emerald-500',
        amenities: ['‡∏™‡∏ß‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß', '‡πÄ‡∏ï‡∏≤‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß', '‡∏Ñ‡∏£‡∏±‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà', 'Netflix'],
        rating: 4.9,
        reviews: 89,
        ownerId: 'owner1'
      },
      {
        id: '3',
        name: '‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏à‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
        type: '‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå',
        description: '‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏î‡πÄ‡∏´‡∏ß‡∏µ‡πà‡∏¢‡∏á ‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ BTS ‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏±‡πâ‡∏ô‡∏ô‡∏≥ ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢',
        price: 2000,
        location: '‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó, ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø',
        bedrooms: 1,
        bathrooms: 1,
        image: 'üè¢',
        color: 'bg-slate-100 text-slate-500',
        amenities: ['Wi-Fi', 'Smart TV', '‡πÉ‡∏Å‡∏•‡πâ‡∏£‡∏ñ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤', '‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ 24 ‡∏ä‡∏°.'],
        rating: 4.5,
        reviews: 215,
        ownerId: 'owner2'
      },
      {
        id: '4',
        name: '‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏∞‡πÄ‡∏•‡∏´‡∏±‡∏ß‡∏´‡∏¥‡∏ô',
        type: '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î',
        description: '‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ó ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏™‡∏á‡∏ö ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏•‡∏∑‡∏≠',
        price: 4500,
        location: '‡∏´‡∏±‡∏ß‡∏´‡∏¥‡∏ô, ‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ø',
        bedrooms: 2,
        bathrooms: 2,
        image: 'üå¥',
        color: 'bg-orange-100 text-orange-500',
        amenities: ['‡∏ï‡∏¥‡∏î‡∏ä‡∏≤‡∏¢‡∏´‡∏≤‡∏î', '‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥', '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤', '‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á'],
        rating: 4.7,
        reviews: 156,
        ownerId: 'owner2'
      }
    ];

    // --- Initialization & Storage ---
    function initializeData() {
      if (!localStorage.getItem('rentalUsers')) {
        const sampleUsers = [
          { id: 'owner1', username: 'owner1', email: 'owner1@example.com', password: '1234', role: 'owner', createdAt: new Date().toISOString() },
          { id: 'owner2', username: 'owner2', email: 'owner2@example.com', password: '1234', role: 'owner', createdAt: new Date().toISOString() }
        ];
        localStorage.setItem('rentalUsers', JSON.stringify(sampleUsers));
      }
      if (!localStorage.getItem('rentalProperties')) {
        localStorage.setItem('rentalProperties', JSON.stringify(sampleProperties));
      }
      if (!localStorage.getItem('rentalBookings')) {
        localStorage.setItem('rentalBookings', JSON.stringify([]));
      }
    }

    function getUsers() { return JSON.parse(localStorage.getItem('rentalUsers') || '[]'); }
    function saveUser(user) { const users = getUsers(); users.push(user); localStorage.setItem('rentalUsers', JSON.stringify(users)); }
    function getProperties() { return JSON.parse(localStorage.getItem('rentalProperties') || '[]'); }
    function saveProperties(properties) { localStorage.setItem('rentalProperties', JSON.stringify(properties)); }
    function getBookings() { return JSON.parse(localStorage.getItem('rentalBookings') || '[]'); }
    function saveBookings(bookings) { localStorage.setItem('rentalBookings', JSON.stringify(bookings)); }

    // --- Components & Renders ---

    function renderNavbar() {
      if (!currentUser) return '';
      
      const isOwner = currentUser.role === 'owner';
      const activeClass = "text-indigo-600 bg-indigo-50 font-semibold";
      const inactiveClass = "text-slate-600 hover:bg-slate-50 hover:text-slate-900";

      return `
        <nav class="sticky top-0 z-40 w-full glass-effect border-b border-slate-200 shadow-sm transition-all duration-300">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
              <!-- Logo -->
              <div class="flex items-center gap-2 cursor-pointer" onclick="setView('home')">
                <div class="w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white text-lg">
                  <i class="ph ph-house-line"></i>
                </div>
                <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-violet-600">
                  StayHub
                </span>
              </div>

              <!-- Desktop Menu -->
              <div class="hidden md:flex items-center gap-1">
                <button onclick="setView('home')" class="px-4 py-2 rounded-full text-sm transition-all ${currentView === 'home' ? activeClass : inactiveClass}">
                  ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å
                </button>
                <button onclick="setView('my-bookings')" class="px-4 py-2 rounded-full text-sm transition-all ${currentView === 'my-bookings' ? activeClass : inactiveClass}">
                  ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                </button>
                ${isOwner ? `
                  <button onclick="setView('my-properties')" class="px-4 py-2 rounded-full text-sm transition-all ${currentView === 'my-properties' ? activeClass : inactiveClass}">
                    ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                  </button>
                  <button onclick="setView('manage-bookings')" class="px-4 py-2 rounded-full text-sm transition-all ${currentView === 'manage-bookings' ? activeClass : inactiveClass}">
                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                  </button>
                ` : ''}
              </div>

              <!-- User Profile -->
              <div class="flex items-center gap-4">
                <div class="hidden sm:flex flex-col items-end mr-2">
                  <span class="text-sm font-semibold text-slate-800">${currentUser.username}</span>
                  <span class="text-xs text-slate-500 capitalize">${currentUser.role === 'owner' ? '‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å' : '‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤'}</span>
                </div>
                <button onclick="logout()" class="p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö">
                  <i class="ph ph-sign-out text-xl"></i>
                </button>
              </div>
            </div>
          </div>
        </nav>
      `;
    }

    function renderLoginPage() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <div class="min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-50">
          <!-- Decor Circles -->
          <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
          <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-violet-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

          <div class="relative w-full max-w-md p-8 bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 fade-in mx-4">
            <div class="text-center mb-8">
              <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-indigo-600 text-white text-3xl mb-4 shadow-lg shadow-indigo-200">
                <i class="ph ph-house-line"></i>
              </div>
              <h1 class="text-3xl font-bold text-slate-800 mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</h1>
              <p class="text-slate-500">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>

            <form onsubmit="handleLogin(event)" class="space-y-5">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1.5">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                <div class="relative">
                  <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"><i class="ph ph-user text-lg"></i></span>
                  <input type="text" id="username" required 
                    class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
                    placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1.5">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                <div class="relative">
                  <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"><i class="ph ph-lock text-lg"></i></span>
                  <input type="password" id="password" required 
                    class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
              </div>

              <button type="submit" 
                class="w-full py-3.5 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-200 transition-all hover:shadow-indigo-300 active:scale-[0.98]">
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
              </button>
            </form>

            <div class="mt-8 pt-6 border-t border-slate-100 text-center">
              <p class="text-slate-500 text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°? 
                <button onclick="renderRegisterPage()" class="text-indigo-600 font-semibold hover:text-indigo-700 hover:underline">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
              </p>
            </div>
          </div>
        </div>
      `;
    }

    function renderRegisterPage() {
      const app = document.getElementById('app');
      app.innerHTML = `
        <div class="min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-50">
          <div class="absolute top-[-10%] right-[-10%] w-96 h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
          <div class="absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-violet-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

          <div class="relative w-full max-w-md p-8 bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 fade-in mx-4">
            <div class="text-center mb-8">
              <h1 class="text-3xl font-bold text-slate-800 mb-2">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</h1>
              <p class="text-slate-500">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
            </div>

            <form onsubmit="handleRegister(event)" class="space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-slate-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                  <input type="text" id="reg-username" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
                </div>
                <div>
                   <label class="block text-sm font-medium text-slate-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                   <input type="email" id="reg-email" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</label>
                <div class="grid grid-cols-2 gap-4">
                  <label class="cursor-pointer">
                    <input type="radio" name="role" value="guest" checked class="peer sr-only">
                    <div class="p-3 text-center border-2 border-slate-200 rounded-xl peer-checked:border-indigo-600 peer-checked:bg-indigo-50 peer-checked:text-indigo-700 transition-all hover:bg-slate-50">
                      <span class="block text-xl mb-1">üë§</span>
                      <span class="text-sm font-medium">‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤</span>
                    </div>
                  </label>
                  <label class="cursor-pointer">
                    <input type="radio" name="role" value="owner" class="peer sr-only">
                    <div class="p-3 text-center border-2 border-slate-200 rounded-xl peer-checked:border-indigo-600 peer-checked:bg-indigo-50 peer-checked:text-indigo-700 transition-all hover:bg-slate-50">
                      <span class="block text-xl mb-1">üè¢</span>
                      <span class="text-sm font-medium">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</span>
                    </div>
                  </label>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                <input type="password" id="reg-password" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                <input type="password" id="reg-confirm-password" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
              </div>

              <button type="submit" 
                class="w-full mt-4 py-3.5 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-200 transition-all active:scale-[0.98]">
                ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
              </button>
            </form>

            <div class="mt-6 text-center">
              <button onclick="renderLoginPage()" class="text-slate-500 hover:text-indigo-600 text-sm font-medium">
                ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function renderHome() {
      const properties = getProperties();
      const filtered = activeFilter === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' ? properties : properties.filter(p => p.type === activeFilter);
      const app = document.getElementById('app');
      
      app.innerHTML = `
        ${renderNavbar()}
        
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <!-- Hero Section -->
          <div class="mb-10 text-center sm:text-left fade-in">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900 mb-3 tracking-tight">
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà <span class="text-indigo-600">‡πÉ‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ñ‡∏∏‡∏ì</span>
            </h1>
            <p class="text-lg text-slate-500 max-w-2xl">
              ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏´‡∏£‡∏π ‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏ï‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏® ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏à‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á
            </p>
          </div>
          
          <!-- Filters -->
          <div class="flex flex-wrap gap-3 mb-8 fade-in" style="animation-delay: 100ms">
            ${['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î', '‡∏ö‡πâ‡∏≤‡∏ô', '‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå'].map(type => `
              <button onclick="changeFilter('${type}')" 
                class="px-5 py-2.5 rounded-full text-sm font-medium transition-all duration-200 ${
                  activeFilter === type 
                  ? 'bg-slate-900 text-white shadow-md transform scale-105' 
                  : 'bg-white text-slate-600 border border-slate-200 hover:border-slate-400 hover:bg-slate-50'
                }">
                ${type}
              </button>
            `).join('')}
          </div>
          
          <!-- Grid -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-10">
            ${filtered.map((property, index) => `
              <div onclick="viewPropertyDetails('${property.id}')" 
                class="group bg-white rounded-2xl border border-slate-100 overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer fade-in hover:-translate-y-1"
                style="animation-delay: ${index * 50}ms">
                
                <!-- Image Placeholder -->
                <div class="relative aspect-[4/3] ${property.color || 'bg-slate-100'} flex items-center justify-center overflow-hidden">
                  <span class="text-7xl drop-shadow-sm transform group-hover:scale-110 transition-transform duration-500">${property.image}</span>
                  <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-2.5 py-1 rounded-lg text-xs font-bold text-slate-800 shadow-sm flex items-center gap-1">
                    <i class="ph-fill ph-star text-yellow-400"></i> ${property.rating || '4.8'}
                  </div>
                </div>

                <!-- Content -->
                <div class="p-5">
                  <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-lg text-slate-900 line-clamp-1 group-hover:text-indigo-600 transition-colors">${property.name}</h3>
                  </div>
                  
                  <div class="flex items-center text-slate-500 text-sm mb-4">
                    <i class="ph ph-map-pin mr-1"></i>
                    <span class="line-clamp-1">${property.location}</span>
                  </div>

                  <div class="flex items-center gap-4 mb-4 text-xs font-medium text-slate-500">
                    <span class="flex items-center bg-slate-50 px-2 py-1 rounded-md border border-slate-100"><i class="ph ph-bed mr-1.5 text-lg"></i> ${property.bedrooms} ‡∏ô‡∏≠‡∏ô</span>
                    <span class="flex items-center bg-slate-50 px-2 py-1 rounded-md border border-slate-100"><i class="ph ph-shower mr-1.5 text-lg"></i> ${property.bathrooms} ‡∏ô‡πâ‡∏≥</span>
                  </div>

                  <div class="flex items-end justify-between border-t border-slate-100 pt-4">
                    <div>
                      <span class="text-xl font-bold text-slate-900">${property.price.toLocaleString()}</span>
                      <span class="text-xs text-slate-500">‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô</span>
                    </div>
                    <div class="w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center group-hover:bg-indigo-600 group-hover:text-white transition-colors">
                      <i class="ph-bold ph-arrow-right"></i>
                    </div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>

          ${filtered.length === 0 ? `
            <div class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
              <div class="text-6xl mb-4 opacity-20">üîç</div>
              <h3 class="text-xl font-bold text-slate-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ</h3>
            </div>
          ` : ''}
        </main>
      `;
    }

    function changeFilter(type) {
      activeFilter = type;
      renderHome();
    }

    function viewPropertyDetails(propertyId) {
      const properties = getProperties();
      selectedProperty = properties.find(p => p.id === propertyId);
      
      const modal = document.createElement('div');
      modal.id = 'property-modal';
      modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6';
      modal.innerHTML = `
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" onclick="closePropertyModal()"></div>
        <div class="relative w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-h-[90vh] fade-in transform scale-100">
          
          <!-- Close Button -->
          <button onclick="closePropertyModal()" class="absolute top-4 right-4 z-10 p-2 bg-white/50 hover:bg-white rounded-full backdrop-blur-md transition-all">
            <i class="ph ph-x text-xl text-slate-800"></i>
          </button>

          <!-- Left: Image Section -->
          <div class="w-full md:w-1/2 ${selectedProperty.color || 'bg-slate-100'} flex items-center justify-center p-12 relative min-h-[300px]">
            <span class="text-9xl drop-shadow-xl animate-bounce-slow">${selectedProperty.image}</span>
            <div class="absolute bottom-6 left-6 flex gap-2">
               ${selectedProperty.amenities.slice(0,2).map(a => `<span class="px-3 py-1 bg-white/90 rounded-lg text-xs font-semibold shadow-sm text-slate-700">${a}</span>`).join('')}
            </div>
          </div>

          <!-- Right: Content Section -->
          <div class="w-full md:w-1/2 p-6 md:p-8 overflow-y-auto bg-white flex flex-col">
            <div class="mb-auto">
              <div class="flex items-center gap-2 mb-2">
                <span class="px-3 py-1 rounded-full bg-slate-100 text-slate-600 text-xs font-bold uppercase tracking-wider">${selectedProperty.type}</span>
                <span class="flex items-center gap-1 text-xs font-bold text-yellow-500"><i class="ph-fill ph-star"></i> ${selectedProperty.rating || 4.8} (${selectedProperty.reviews || 100} ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß)</span>
              </div>
              
              <h2 class="text-3xl font-bold text-slate-900 mb-2">${selectedProperty.name}</h2>
              <div class="flex items-center text-slate-500 mb-6">
                <i class="ph-fill ph-map-pin mr-2 text-indigo-500"></i> ${selectedProperty.location}
              </div>

              <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="text-center p-3 rounded-xl bg-slate-50 border border-slate-100">
                  <i class="ph ph-bed text-2xl text-slate-400 mb-1"></i>
                  <div class="text-sm font-bold text-slate-800">${selectedProperty.bedrooms} ‡∏ô‡∏≠‡∏ô</div>
                </div>
                <div class="text-center p-3 rounded-xl bg-slate-50 border border-slate-100">
                  <i class="ph ph-shower text-2xl text-slate-400 mb-1"></i>
                  <div class="text-sm font-bold text-slate-800">${selectedProperty.bathrooms} ‡∏ô‡πâ‡∏≥</div>
                </div>
                <div class="text-center p-3 rounded-xl bg-slate-50 border border-slate-100">
                  <i class="ph ph-users text-2xl text-slate-400 mb-1"></i>
                  <div class="text-sm font-bold text-slate-800">4 ‡∏Ñ‡∏ô</div>
                </div>
              </div>

              <h3 class="font-bold text-slate-900 mb-3">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
              <p class="text-slate-500 text-sm leading-relaxed mb-6">${selectedProperty.description}</p>

              <h3 class="font-bold text-slate-900 mb-3">‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å</h3>
              <div class="flex flex-wrap gap-2 mb-8">
                ${selectedProperty.amenities.map(item => `
                  <span class="inline-flex items-center px-3 py-1.5 rounded-lg bg-slate-50 text-slate-600 text-xs font-medium border border-slate-100">
                    <i class="ph-fill ph-check-circle text-green-500 mr-1.5"></i> ${item}
                  </span>
                `).join('')}
              </div>
            </div>

            <!-- Booking Form -->
            <div class="mt-4 pt-6 border-t border-slate-100">
              <div class="flex items-end justify-between mb-4">
                 <div>
                   <span class="text-3xl font-bold text-slate-900">${selectedProperty.price.toLocaleString()}</span>
                   <span class="text-sm text-slate-500">‡∏ö‡∏≤‡∏ó / ‡∏Ñ‡∏∑‡∏ô</span>
                 </div>
              </div>

              <form onsubmit="handleBooking(event, '${selectedProperty.id}')" class="space-y-4">
                <div class="grid grid-cols-2 gap-3">
                  <div>
                    <label class="block text-xs font-bold text-slate-700 uppercase mb-1">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô</label>
                    <input type="date" id="check-in" required class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                  </div>
                  <div>
                    <label class="block text-xs font-bold text-slate-700 uppercase mb-1">‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå</label>
                    <input type="date" id="check-out" required class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                  </div>
                </div>
                <button type="submit" class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all active:scale-[0.98]">
                  ‡∏à‡∏≠‡∏á‡πÄ‡∏•‡∏¢
                </button>
              </form>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      document.body.style.overflow = 'hidden';

      const today = new Date().toISOString().split('T')[0];
      document.getElementById('check-in').min = today;
      document.getElementById('check-out').min = today;
    }

    function closePropertyModal() {
      const modal = document.getElementById('property-modal');
      if (modal) {
        modal.remove();
        document.body.style.overflow = 'auto';
      }
    }

    function renderMyBookings() {
      const bookings = getBookings().filter(b => b.guestId === currentUser.username);
      const app = document.getElementById('app');
      
      app.innerHTML = `
        ${renderNavbar()}
        <div class="max-w-4xl mx-auto px-4 py-8">
          <h2 class="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
            <i class="ph ph-receipt"></i> ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
          </h2>
          
          ${bookings.length === 0 ? `
            <div class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
              <div class="text-6xl mb-4 opacity-20">üé´</div>
              <h3 class="text-xl font-bold text-slate-400 mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
              <button onclick="setView('home')" class="text-indigo-600 font-medium hover:underline">‡πÑ‡∏õ‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞</button>
            </div>
          ` : `
            <div class="space-y-4">
              ${bookings.map(booking => {
                let statusClass = '';
                let statusIcon = '';
                switch(booking.status) {
                  case '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô': statusClass = 'bg-amber-50 text-amber-600 border-amber-100'; statusIcon = 'ph-clock'; break;
                  case '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß': statusClass = 'bg-emerald-50 text-emerald-600 border-emerald-100'; statusIcon = 'ph-check-circle'; break;
                  case '‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò': statusClass = 'bg-red-50 text-red-600 border-red-100'; statusIcon = 'ph-x-circle'; break;
                  default: statusClass = 'bg-slate-50 text-slate-500 border-slate-100'; statusIcon = 'ph-prohibit';
                }

                return `
                  <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-all fade-in">
                    <div class="flex flex-col sm:flex-row justify-between gap-4">
                      <div>
                        <h3 class="text-lg font-bold text-slate-900 mb-1">${booking.propertyName}</h3>
                        <div class="flex gap-4 text-sm text-slate-500 mb-2">
                          <span class="flex items-center"><i class="ph ph-calendar-blank mr-1"></i> ${new Date(booking.checkIn).toLocaleDateString('th-TH')} - ${new Date(booking.checkOut).toLocaleDateString('th-TH')}</span>
                          <span class="flex items-center"><i class="ph ph-moon mr-1"></i> ${booking.nights} ‡∏Ñ‡∏∑‡∏ô</span>
                        </div>
                        <div class="text-indigo-600 font-bold text-lg">${booking.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</div>
                      </div>
                      
                      <div class="flex flex-col items-end gap-3">
                        <span class="px-3 py-1.5 rounded-lg border text-sm font-semibold flex items-center gap-1.5 ${statusClass}">
                          <i class="ph-fill ${statusIcon}"></i> ${booking.status}
                        </span>
                        ${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? `
                          <button onclick="cancelBooking('${booking.id}')" class="text-sm text-red-500 hover:text-red-700 font-medium hover:underline">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                          </button>
                        ` : ''}
                      </div>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          `}
        </div>
      `;
    }

    function renderMyProperties() {
        const properties = getProperties().filter(p => p.ownerId === currentUser.username);
        const app = document.getElementById('app');
        
        app.innerHTML = `
          ${renderNavbar()}
          <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
                <i class="ph ph-buildings"></i> ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
              </h2>
              <button onclick="openAddPropertyModal()" class="flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium shadow-md transition-all">
                <i class="ph-bold ph-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å
              </button>
            </div>
            
            ${properties.length === 0 ? `
              <div class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
                <div class="text-6xl mb-4 opacity-20">üè†</div>
                <h3 class="text-xl font-bold text-slate-400 mb-2">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h3>
                <button onclick="openAddPropertyModal()" class="text-indigo-600 font-medium hover:underline">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÅ‡∏´‡πà‡∏á‡πÅ‡∏£‡∏Å</button>
              </div>
            ` : `
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                ${properties.map(property => `
                  <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden group hover:shadow-lg transition-all">
                    <div class="h-48 ${property.color || 'bg-slate-100'} flex items-center justify-center relative">
                      <span class="text-6xl drop-shadow-sm group-hover:scale-110 transition-transform">${property.image}</span>
                      <div class="absolute top-3 right-3 flex gap-2">
                        <button onclick="deleteProperty('${property.id}')" class="p-2 bg-white/90 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-colors">
                          <i class="ph-bold ph-trash"></i>
                        </button>
                      </div>
                    </div>
                    <div class="p-5">
                      <h3 class="font-bold text-lg text-slate-900 mb-1">${property.name}</h3>
                      <p class="text-slate-500 text-sm mb-4 line-clamp-2">${property.description}</p>
                      <div class="flex items-center justify-between pt-4 border-t border-slate-50">
                        <span class="font-bold text-indigo-600">${property.price.toLocaleString()} ‡∏ö./‡∏Ñ‡∏∑‡∏ô</span>
                        <span class="text-xs px-2 py-1 bg-slate-100 rounded text-slate-600">${property.type}</span>
                      </div>
                    </div>
                  </div>
                `).join('')}
              </div>
            `}
          </div>
        `;
    }

    function renderManageBookings() {
        const myProperties = getProperties().filter(p => p.ownerId === currentUser.username);
        const myPropertyIds = myProperties.map(p => p.id);
        const bookings = getBookings().filter(b => myPropertyIds.includes(b.propertyId));

        const app = document.getElementById('app');
        app.innerHTML = `
          ${renderNavbar()}
          <div class="max-w-5xl mx-auto px-4 py-8">
            <h2 class="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
              <i class="ph ph-clipboard-text"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            </h2>

             ${bookings.length === 0 ? `
                <div class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
                  <div class="text-6xl mb-4 opacity-20">üì≠</div>
                  <h3 class="text-xl font-bold text-slate-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤</h3>
                </div>
             ` : `
                <div class="space-y-4">
                  ${bookings.map(booking => `
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col md:flex-row gap-6 items-start md:items-center">
                      <div class="flex-1">
                        <div class="flex items-center gap-3 mb-2">
                          <h3 class="font-bold text-lg text-slate-900">${booking.propertyName}</h3>
                          <span class="px-2 py-0.5 rounded text-xs font-semibold bg-indigo-50 text-indigo-600">ID: ${booking.id.slice(-4)}</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm text-slate-600">
                          <div><span class="font-semibold">‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:</span> ${booking.guestId}</div>
                          <div><span class="font-semibold">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span> ${booking.totalPrice.toLocaleString()} ‡∏ö.</div>
                          <div><span class="font-semibold">‡πÄ‡∏Ç‡πâ‡∏≤:</span> ${new Date(booking.checkIn).toLocaleDateString('th-TH')}</div>
                          <div><span class="font-semibold">‡∏≠‡∏≠‡∏Å:</span> ${new Date(booking.checkOut).toLocaleDateString('th-TH')}</div>
                        </div>
                      </div>
                      
                      <div class="flex flex-col items-end gap-3 min-w-[150px]">
                        <div class="text-sm font-bold ${
                          booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? 'text-amber-500' :
                          booking.status === '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß' ? 'text-emerald-500' :
                          booking.status === '‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò' ? 'text-red-500' : 'text-slate-400'
                        }">
                          ${booking.status}
                        </div>
                        ${booking.status === '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' ? `
                          <div class="flex gap-2">
                            <button onclick="approveBooking('${booking.id}')" class="px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-semibold rounded-lg shadow-sm transition-colors">
                              ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                            </button>
                            <button onclick="rejectBooking('${booking.id}')" class="px-4 py-2 bg-white border border-slate-200 hover:bg-red-50 text-red-500 text-sm font-semibold rounded-lg shadow-sm transition-colors">
                              ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
                            </button>
                          </div>
                        ` : ''}
                      </div>
                    </div>
                  `).join('')}
                </div>
             `}
          </div>
        `;
    }

    // --- Modal Logic for Adding Property ---
    function openAddPropertyModal() {
        const modal = document.createElement('div');
        modal.id = 'add-property-modal';
        modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm';
        modal.onclick = (e) => { if(e.target === modal) closeAddPropertyModal(); };
        
        modal.innerHTML = `
          <div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-8 fade-in">
            <h2 class="text-2xl font-bold text-slate-900 mb-6">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà</h2>
            <form onsubmit="handleAddProperty(event)" class="space-y-5">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</label>
                <input type="text" id="prop-name" required class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
              </div>
              
              <div class="grid grid-cols-2 gap-4">
                 <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="prop-type" class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                      <option value="‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î">‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î</option>
                      <option value="‡∏ö‡πâ‡∏≤‡∏ô">‡∏ö‡πâ‡∏≤‡∏ô</option>
                      <option value="‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå">‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå</option>
                    </select>
                 </div>
                 <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Ñ‡∏∑‡∏ô</label>
                    <input type="number" id="prop-price" required min="0" class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                 </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                <textarea id="prop-description" rows="3" required class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></textarea>
              </div>

              <div>
                 <label class="block text-sm font-medium text-slate-700 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á</label>
                 <input type="text" id="prop-location" required class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div>
                   <label class="block text-sm font-medium text-slate-700 mb-1">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</label>
                   <input type="number" id="prop-bedrooms" value="1" min="1" class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
                <div>
                   <label class="block text-sm font-medium text-slate-700 mb-1">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</label>
                   <input type="number" id="prop-bathrooms" value="1" min="1" class="w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
              </div>

              <div class="flex gap-3 pt-4">
                <button type="button" onclick="closeAddPropertyModal()" class="flex-1 py-3 border border-slate-200 text-slate-600 font-semibold rounded-xl hover:bg-slate-50">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="submit" class="flex-1 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 shadow-md">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
              </div>
            </form>
          </div>
        `;
        document.body.appendChild(modal);
    }

    function closeAddPropertyModal() {
        const modal = document.getElementById('add-property-modal');
        if(modal) modal.remove();
    }

    // --- Actions & Handlers (Logic kept same mostly) ---

    function handleLogin(e) {
      e.preventDefault();
      const u = document.getElementById('username').value;
      const p = document.getElementById('password').value;
      const users = getUsers();
      const user = users.find(x => x.username === u && x.password === p);
      if (user) { currentUser = user; currentView = 'home'; renderHome(); } 
      else { alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); }
    }

    function handleRegister(e) {
      e.preventDefault();
      const u = document.getElementById('reg-username').value;
      const users = getUsers();
      if(users.find(x => x.username === u)) { alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß'); return; }
      
      const p = document.getElementById('reg-password').value;
      const cp = document.getElementById('reg-confirm-password').value;
      if(p !== cp) { alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô'); return; }

      const newUser = {
        id: Date.now().toString(),
        username: u,
        email: document.getElementById('reg-email').value,
        password: p,
        role: document.querySelector('input[name="role"]:checked').value,
        createdAt: new Date().toISOString()
      };
      saveUser(newUser);
      currentUser = newUser;
      currentView = 'home';
      renderHome();
    }

    function logout() { currentUser = null; currentView = 'home'; renderLoginPage(); }

    function setView(v) { currentView = v; 
      if(v==='home') renderHome();
      else if(v==='my-bookings') renderMyBookings();
      else if(v==='my-properties') renderMyProperties();
      else if(v==='manage-bookings') renderManageBookings();
    }

    function handleBooking(e, propId) {
      e.preventDefault();
      const cin = document.getElementById('check-in').value;
      const cout = document.getElementById('check-out').value;
      
      if(new Date(cout) <= new Date(cin)) { alert('‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô'); return; }
      
      const nights = Math.ceil((new Date(cout) - new Date(cin)) / (86400000));
      const total = nights * selectedProperty.price;
      
      const booking = {
        id: Date.now().toString(),
        propertyId: propId,
        propertyName: selectedProperty.name,
        guestId: currentUser.username,
        ownerId: selectedProperty.ownerId,
        checkIn: cin,
        checkOut: cout,
        nights,
        totalPrice: total,
        status: '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
        createdAt: new Date().toISOString()
      };
      
      const b = getBookings(); b.push(booking); saveBookings(b);
      closePropertyModal();
      alert('‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô');
      setView('my-bookings');
    }

    function cancelBooking(id) {
       if(confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å?')) {
         const b = getBookings();
         const idx = b.findIndex(x => x.id === id);
         if(idx !== -1) { b[idx].status = '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'; saveBookings(b); renderMyBookings(); }
       }
    }

    function approveBooking(id) {
       const b = getBookings();
       const item = b.find(x => x.id === id);
       if(item) { item.status = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß'; saveBookings(b); renderManageBookings(); }
    }

    function rejectBooking(id) {
       if(confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò?')) {
        const b = getBookings();
        const item = b.find(x => x.id === id);
        if(item) { item.status = '‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò'; saveBookings(b); renderManageBookings(); }
       }
    }
    
    function handleAddProperty(e) {
      e.preventDefault();
      const type = document.getElementById('prop-type').value;
      const icons = { '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î': 'üè¢', '‡∏ö‡πâ‡∏≤‡∏ô': 'üè°', '‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå': 'üèòÔ∏è' };
      const colors = { '‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î': 'bg-blue-100 text-blue-500', '‡∏ö‡πâ‡∏≤‡∏ô': 'bg-emerald-100 text-emerald-500', '‡∏≠‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏°‡∏ô‡∏ï‡πå': 'bg-orange-100 text-orange-500' };

      const newProp = {
        id: Date.now().toString(),
        name: document.getElementById('prop-name').value,
        type,
        description: document.getElementById('prop-description').value,
        price: parseInt(document.getElementById('prop-price').value),
        location: document.getElementById('prop-location').value,
        bedrooms: parseInt(document.getElementById('prop-bedrooms').value),
        bathrooms: parseInt(document.getElementById('prop-bathrooms').value),
        image: icons[type],
        color: colors[type],
        amenities: ['Wi-Fi', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®'],
        rating: 0, reviews: 0,
        ownerId: currentUser.username
      };
      const p = getProperties(); p.push(newProp); saveProperties(p);
      closeAddPropertyModal();
      renderMyProperties();
    }

    function deleteProperty(id) {
      if(confirm('‡∏•‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏ô‡∏µ‡πâ?')) {
        const p = getProperties().filter(x => x.id !== id);
        saveProperties(p);
        renderMyProperties();
      }
    }

    // Start
    initializeData();
    renderLoginPage();

  </script>
 </body>
</html>